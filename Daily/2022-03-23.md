# blog

1. hexo generate ç¯å¢ƒé—®é¢˜
    1. hexo æœ¬èº«ä¸èƒ½ä»å‘½ä»¤è¡Œè®¾ç½®å˜é‡ï¼Œæ”¹å˜ path
    2. æ€è€ƒï¼š éœ€è¦ä»æ¨¡æ¿æŒ‰ç¯å¢ƒæ„å»ºï¼Œå‡ ç§å·¥å…·ï¼š
        - ansibleï¼šæœ€ç›´æ¥ï¼Œç„¶è€Œ windows ä¸èƒ½å®‰è£… ansible ï¼Œæ”¾å¼ƒï¼ˆä½¿ç”¨ ansible ä¹Ÿå¤ªè¿‡å°é¢˜å¤§åšï¼‰
        - jinja2ï¼šjinja æœ¬èº«æ²¡æœ‰ç¬¬ä¸€æ–¹çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸æƒ³å†™ python ï¼Œæ”¾å¼ƒ
        - golang templateï¼šgithub action å¯ä»¥ä»å‘½ä»¤è¡Œè¿è¡Œ go è„šæœ¬ï¼ŒåŸºæœ¬æ²¡æœ‰ä¾èµ–ï¼Œä¸éœ€è¦å®‰è£…å…¶ä»–åŒ…ï¼Œä¸éœ€è¦åšæ¨¡å—ï¼ˆæ‡’ï¼‰
            - golang template çš„ name è¦æ˜¯ file name
                ```golang
                name := path.Base(*tmpl)
                t := template.Must(template.New(name).ParseFiles(*tmpl))
                err = t.Execute(os.Stdout, config)
                if err != nil {
                    log.Fatal(err)
                }
                ```
            - github workflow å¦‚ä¸‹
                ```yaml            
                - name: Use Go 1.16
                    uses: actions/setup-go@v1
                    with:
                    go-version: '1.16.1'
                
                - name: generate config
                    run: go run ./genconfig/main.go --env=gh-pages > _config.yml

                ```
            - windows ä¸‹ ç®¡é“å‘½ä»¤ç¬¦æœ‰é—®é¢˜ï¼ˆå¸¦ BOMï¼‰ï¼Œmake å‘½ä»¤ä¹Ÿç”¨ä¸äº†ï¼Œä½†æ‡’å¾—è§£å†³
2. åŸºç¡€è®¾æ–½æ€ä¹ˆå®šä¹‰
    1. è®¾æ–½æœ‰ï¼š
        1. S3
        2. CloudFront
        3. Route53
        4. Certificate Manager
    2. ä½¿ç”¨å•ç‹¬çš„åº“å®šä¹‰ï¼ˆè€ƒè™‘åˆ°ä»¥åè¿˜è¦ç•™ cloudFront -> Backend çš„é€”å¾„ï¼‰
    3. trigger -> Github æœ‰ç‚¹æ…¢
3. ä¸Šä¼ åˆ° s3
    1. é¦–å…ˆç›´æ¥å‘½ä»¤è¡Œå°è¯•ä»¥ä¸‹
        ```
        aws s3 cp ./public s3://test.okami-ryo.xyz/ --recursive --region=ap-northeast-1
        ```
        æˆåŠŸ
        ä½†ï¼Œurl è®¿é—® https://test.okami-ryo.xyz è¿”å› 307 ä¸ 301 ï¼Œé¡ºåºå¦‚ä¸‹ï¼š
        ![[2022-03-24-02-04-19.png]]
        åŸå› å¦‚ä¸‹ï¼š
        - s3 æœ‰åœ°åŒºè®¿é—® url ä¸å…¨çƒè®¿é—®url
        - s3 æ–°å»ºæ—¶ï¼Œå…¨çƒè®¿é—®éœ€è¦ 24h æ‰èƒ½å»ºç«‹
        - CloudFront é“¾æ¥åˆ° s3 æ˜¯ä½¿ç”¨ å…¨çƒè®¿é—®
        - CloudFront åœ¨ us-east-1 ï¼Œå…¨çƒè®¿é—®è®¿é—®ä¸åˆ°å…¶ä»–åœ°åŒºçš„ s3

        é€”ä¸­åˆè¯•äº†ä¸€ä¸‹ï¼Œ `index.html` å’Œtsç­‰æ–‡ä»¶èƒ½ç›´æ¥è®¿é—®äº†ï¼Œä½†è®¿é—®æ–‡ç« åˆæ˜¾ç¤ºé”™è¯¯
    2. 


# AWS
1. KMS: åˆ›å»º key
2. Secrets Manager: åˆ›å»ºå¯†é’¥
3. ACM: åˆ›å»ºè¯ä¹¦

helm bitnami kafka chart, åˆ›å»ºå¤–éƒ¨è®¿é—® + ELB + DNS

1. k8s é›†ç¾¤ä¸­ï¼Œéœ€è¦LBå»ºå¥½åæ‰èƒ½çŸ¥é“åœ°å€
2. Bitnami/chart/kafka é€šè¿‡å“¨å…µï¼Œè·å¾— lb åœ°å€ï¼Œ
3. ELB ä¸ DNS ç…§è€è·¯ç”¨ Annotation åˆ›å»º


### vscode memo
paste images
- install [vscode-paste-image](https://github.com/mushanshitiancai/vscode-paste-image)

    For pasting images from clipboard you can install and use vscode-paste-image. Thanks to VSCode Marketplace and the author of vscode-paste-image ğŸ’™.

    Example of settings.json for embedding images using `![[2020-08-12-20-11-46.png]]` format and saving them in Attachments folder automatically:

    ```json
    {
    "pasteImage.insertPattern": "![[${imageFileName}]]",
    "pasteImage.path": "${projectRoot}/Attachments"
    }
    ```

    After configuring vscode-paste-image extension, just copy some image and execute Paste image from the command palette and you are good to go ğŸ‘. You can create a shortcut for this command as well!

However, it could pastes, but configure failed.

Reason: another extension called hexo-utils using same command, with same effect as pasting image.
But that extension could not accept this config.
So, uninstall it, done.